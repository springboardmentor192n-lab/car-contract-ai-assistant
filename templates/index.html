<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Car AI Assistant</title>

<style>
html { scroll-behavior: smooth; }

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: #0f172a;
  color: white;
}

/* NAVBAR */
.navbar {
  position: fixed;
  top: 0;
  right: 0;
  padding: 20px 40px;
  z-index: 1000;
}

.navbar button {
  padding: 10px 20px;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.2);
  color: white;
  border-radius: 20px;
  cursor: pointer;
}

.dropdown {
  display: none;
  margin-top: 10px;
  text-align: right;
}

.dropdown a {
  display: block;
  margin: 8px 0;
  text-decoration: none;
  color: white;
}

/* HERO */
.hero {
  height: 100vh;
  background: linear-gradient(135deg, #1e3a8a, #0f172a);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 0 20px;
}

.hero h1 {
  font-size: 60px;
  margin-bottom: 20px;
}

.hero p {
  font-size: 18px;
  max-width: 600px;
  opacity: 0.85;
}

/* SECTIONS */
.section {
  padding: 120px 20px;
  text-align: center;
}

.card {
  background: rgba(255,255,255,0.05);
  padding: 30px;
  border-radius: 15px;
  width: 60%;
  margin: auto;
}

input, textarea {
  width: 90%;
  padding: 12px;
  margin: 10px 0;
  border-radius: 10px;
  border: none;
  outline: none;
}

button.action {
  padding: 12px 30px;
  background: #2563eb;
  border: none;
  color: white;
  border-radius: 20px;
  cursor: pointer;
}

button.action:hover {
  background: #1d4ed8;
}

.output {
  margin-top: 20px;
  display: none;
  white-space: pre-wrap;
  text-align: left;
}
</style>
</head>

<body>

<div class="navbar">
  <button onclick="toggleMenu()">Menu</button>
  <div id="menuOptions" class="dropdown">
    <a href="#contract">Contract Analysis</a>
    <a href="#vin">VIN Lookup</a>
  </div>
</div>

<section class="hero">
  <h1>Car AI Assistant</h1>
  <p>
    Analyze lease contracts intelligently and retrieve vehicle details instantly.
    Built to simplify complex paperwork using AI.
  </p>
</section>

<section id="contract" class="section">
  <h2>Contract Analysis</h2>
  <div class="card">
    <input type="file" id="file" accept=".pdf,.png,.jpg">
    <textarea id="question" placeholder="Ask something about your contract..."></textarea>
    <button class="action" onclick="send()">Analyze</button>
    <div id="contractOutput" class="output"></div>
  </div>
</section>

<section id="vin" class="section">
  <h2>VIN Lookup</h2>
  <div class="card">
    <input id="vinInput" placeholder="Enter VIN number (17 characters)">
    <button class="action" onclick="lookupVIN()">Fetch Details</button>
    <div id="vinOutput" class="output"></div>
  </div>
</section>
  <!-- ===== JS ===== -->
  <script>
    function toggleMenu() {
    const menu = document.getElementById("menuOptions");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
     }
    function send() {
      const fileInput = document.getElementById("file");
      const questionInput = document.getElementById("question");
      const outputDiv = document.getElementById("contractOutput");

      if (!fileInput.files.length || !questionInput.value) {
        alert("Please upload a contract and enter a question.");
        return;
      }

      const formData = new FormData();
      formData.append("file", fileInput.files[0]);
      formData.append("question", questionInput.value);

      outputDiv.style.display = "block";
      outputDiv.innerText = "Analyzing contract... â³";

      fetch("/analyze", {
        method: "POST",
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        outputDiv.innerText = data.result;
      })
      .catch(err => {
        outputDiv.innerText = "Error analyzing contract.";
        console.error(err);
      });
    }

    function lookupVIN() {
      const vin = document.getElementById("vinInput").value;
      const outputDiv = document.getElementById("vinOutput");

      if (!vin) {
        alert("Please enter a VIN number.");
        return;
      }

      outputDiv.style.display = "block";
      outputDiv.innerText = "Fetching vehicle data... ";

      fetch("/vin", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ vin })
      })
      .then(res => res.json())
      .then(data => {
        outputDiv.innerText = JSON.stringify(data, null, 2);
      })
      .catch(err => {
        outputDiv.innerText = "Error fetching VIN data.";
        console.error(err);
      });
    }
  </script>

</body>
</html>
